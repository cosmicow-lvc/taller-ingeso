<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/landing.css">
  <title>Catálogo de productos</title>
  <style>
    :root{
      --bg:#f7f7f8;--panel:#ffffff;--ink:#111827;--sub:#6b7280;--brand:#2563eb;--ring:rgba(37,99,235,.25);
      --chip:#eef2ff;--chip-ink:#3730a3;--border:#e5e7eb;--muted:#f3f4f6;
      --radius:14px;--radius-sm:10px;--space:14px;--shadow:0 10px 18px rgba(17,24,39,.06);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";}
    a{color:inherit}
    .layout{max-width:1200px;margin:24px auto;padding:0 16px}
    .page-title{font-size:clamp(22px,3vw,28px);font-weight:700;margin:8px 0 14px}

    .toolbar{display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:12px}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:6px 10px;border-radius:999px;background:var(--chip);color:var(--chip-ink);font-size:12px;font-weight:600;border:1px solid #e0e7ff;cursor:pointer;user-select:none}
    .chip.is-active{background:#dbeafe;color:#1e3a8a;border-color:#bfdbfe}
    .chip .x{margin-left:6px;opacity:.7}

    .sort{margin-left:auto;display:flex;align-items:center;gap:8px}
    select{appearance:none;border:1px solid var(--border);background:var(--panel);padding:10px 12px;border-radius:10px;font-size:14px}

    .content{display:grid;grid-template-columns:270px 1fr;gap:16px}
    @media (max-width: 900px){
      .content{grid-template-columns:1fr}
      .sidebar{order:2}
    }

    .sidebar{position:sticky;top:10px;align-self:start;background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:8px;box-shadow:var(--shadow)}
    .filter-header{display:flex;align-items:center;gap:10px;padding:8px 10px;border-radius:var(--radius-sm);font-weight:700}

    .accordion{border-top:1px dashed var(--border)}
    .acc-item{border-bottom:1px dashed var(--border)}
    .acc-button{width:100%;text-align:left;padding:12px 10px;background:none;border:0;display:flex;justify-content:space-between;align-items:center;font-weight:600;cursor:pointer}
    .acc-content{display:grid;grid-template-rows:0fr;transition:grid-template-rows .25s ease;overflow:hidden;padding:0 10px}
    .acc-content > div{min-height:0}
    .acc-item.open .acc-content{grid-template-rows:1fr;padding-bottom:10px}
    .check{display:flex;align-items:center;gap:8px;margin:6px 0}
    .search-in-filter{width:100%;padding:8px 10px;border:1px solid var(--border);border-radius:10px;margin:4px 0 8px}

    .grid{display:grid;grid-template-columns:repeat(4, 1fr);gap:16px}
    @media (max-width: 1200px){.grid{grid-template-columns:repeat(3, 1fr)}}
    @media (max-width: 800px){.grid{grid-template-columns:repeat(2, 1fr)}}
    @media (max-width: 520px){.grid{grid-template-columns:1fr}}

    .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}
    .thumb{aspect-ratio: 4/3;background:linear-gradient(135deg,#e5e7eb,#d1d5db);display:grid;place-items:center}
    .thumb span{font-size:12px;color:#6b7280}
    .card-body{padding:10px 12px;display:grid;gap:8px}
    .title{font-size:14px;font-weight:700;line-height:1.3;min-height:36px}
    .price{font-size:12px;background:var(--muted);display:inline-block;padding:6px 8px;border-radius:999px;border:1px solid var(--border)}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .btn{border:1px solid var(--border);background:var(--panel);border-radius:10px;padding:8px 10px;font-size:13px;cursor:pointer}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
    .btn:focus{outline:2px solid var(--ring);outline-offset:2px}

    .empty{padding:32px;text-align:center;color:var(--sub)}
  </style>
</head>
<header class = "navbar">
	<nav class="h-izquierda">
		<img> Logo
		<a href="#"> Catalogo </a>
		<a href="wip.html"> Quienes somos </a>
		<a href="wip.html"> Contactanos </a>
	</nav>
	<div class = "h-derecha">
		<input type="text" id="barraBuscarProd" placeholder="Buscar Producto">
		<a href="login.html"> Iniciar sesión</a>
	</div>
</header> 
<body>
  <div class="layout">
    <h1 class="page-title">Filtrar</h1>

    <div class="toolbar">
      <div class="chips" id="activeChips" aria-live="polite"></div>
      <div class="sort">
        <label for="sortSelect" class="sr-only">Ordenar</label>
        <select id="sortSelect" aria-label="Ordenar por">
          <option value="featured">Ordenar por: Destacados</option>
          <option value="price-asc">Precio: menor a mayor</option>
          <option value="price-desc">Precio: mayor a menor</option>
          <option value="name-asc">Nombre A-Z</option>
          <option value="name-desc">Nombre Z-A</option>
        </select>
      </div>
    </div>

    <div class="content">
      <!-- Sidebar / Filtros -->
      <aside class="sidebar" aria-label="Filtros del catálogo">
        <div class="filter-header">Filtros</div>

        <div class="accordion" id="filters">
          <!-- Filtro 1: Categorías -->
          <section class="acc-item open" data-key="category">
            <button class="acc-button" type="button" aria-expanded="true">
              <span>Filtro 1 — Categoría</span>
              <span>▾</span>
            </button>
            <div class="acc-content">
              <div>
                <div class="check"><input type="checkbox" value="CAT 1" id="cat1"><label for="cat1">CAT 1</label></div>
                <div class="check"><input type="checkbox" value="CAT 2" id="cat2"><label for="cat2">CAT 2</label></div>
                <div class="check"><input type="checkbox" value="Accesorios" id="cat3"><label for="cat3">Accesorios</label></div>
              </div>
            </div>
          </section>

          <!-- Filtro 2: Precio -->
          <section class="acc-item" data-key="price">
            <button class="acc-button" type="button" aria-expanded="false">
              <span>Filtro 2 — Precio</span><span>▸</span>
            </button>
            <div class="acc-content">
              <div>
                <div style="display:flex;gap:8px;align-items:center">
                  <input class="search-in-filter" id="minPrice" type="number" min="0" placeholder="Mín" style="max-width:110px" />
                  <input class="search-in-filter" id="maxPrice" type="number" min="0" placeholder="Máx" style="max-width:110px" />
                  <button class="btn" id="applyPrice">Aplicar</button>
                </div>
              </div>
            </div>
          </section>

          <!-- Filtro 3: Búsqueda -->
          <section class="acc-item" data-key="q">
            <button class="acc-button" type="button" aria-expanded="false">
              <span>Filtro 3 — Buscar</span><span>▸</span>
            </button>
            <div class="acc-content">
              <div>
                <input id="q" class="search-in-filter" type="search" placeholder="Nombre del producto…" />
              </div>
            </div>
          </section>

          <!-- Filtro 4/5: de ejemplo -->
          <section class="acc-item" data-key="brand">
            <button class="acc-button" type="button" aria-expanded="false">
              <span>Filtro 4 — Marca</span><span>▸</span>
            </button>
            <div class="acc-content">
              <div id="brandList"></div>
            </div>
          </section>
          <section class="acc-item" data-key="rating">
            <button class="acc-button" type="button" aria-expanded="false">
              <span>Filtro 5 — Rating</span><span>▸</span>
            </button>
            <div class="acc-content">
              <div>
                <div class="check"><input type="radio" name="rating" value="4" id="r4"><label for="r4">4★ o más</label></div>
                <div class="check"><input type="radio" name="rating" value="3" id="r3"><label for="r3">3★ o más</label></div>
                <div class="check"><input type="radio" name="rating" value="2" id="r2"><label for="r2">2★ o más</label></div>
                <div class="check"><input type="radio" name="rating" value="" id="rall"><label for="rall">Todos</label></div>
              </div>
            </div>
          </section>
        </div>
      </aside>

      <!-- Grid de productos -->
      <main>
        <div id="grid" class="grid" aria-live="polite"></div>
        <div id="empty" class="empty" hidden>No hay productos que coincidan con los filtros.</div>
      </main>
    </div>
  </div>
</body>
<footer class="footer">
	<div>
		<img>Logo
		<div class = "flexx"> 
			<img>red1
			<img>red2
			<img>red3
			<img>red4
		</div>
	</div>

	<div>
		<div style="color: white;">Ubicación: Javier Díaz #6969</div>
		<div style="color: white;">Horarios de atención</div>
		<div style="color: white;">Lunes a sábado     06:00 - 13:00</div>
		<div style="color: white;">Domingo            10:00 - 18:00</div>
	</div>

	<nav class="nav">
		<p href="wip.html" style="color: white;">Ayuda</p>
		<a href="wip.html" style="color: white;">Preguntas frecuentes</a>
		<a href="wip.html" style="color: white;">Políticas de devolución</a>
		<a href="wip.html" style="color: white;">Contacto</a>
	</nav>
	
	<nav class="nav">
		<p style="color: white;">Nosotros</p>
		<a href="wip.html" style="color: white;">Quienes somos</a>
		<a href="wip.html" style="color: white;">Misión, visión y valores</a>
		<a href="wip.html" style="color: white;">Historia</a>	
	</nav>
	
	<nav class="nav">
		<p style="color: white;">Otro</p>
		<a href="wip.html" style="color: white;">Loren ipsum</a>
		<a href="wip.html" style="color: white;">Loren ipsum</a>
		<a href="atencion_al_cliente.html" style="color: white;">Loren ipsum</a>
	</nav>
</footer>
<script>
    // --- Datos de ejemplo ---
    const products = Array.from({length:16}).map((_,i)=>({
      id:i+1,
      name:["Producto","Gadget","Item","Accesorio"][i%4]+" "+(i+1),
      price: (i%7+1)*10 + (i%3)*4 + 1,
      category: ["CAT 1","CAT 2","Accesorios"][i%3],
      brand: ["Acme","Nova","Zetta","Orion"][i%4],
      rating: [5,4,4,3,2,5,3,4,5,1,4,2,5,3,4,5][i],
      img: "",
    }));

    // --- Estado de filtros ---
    const state = {
      selectedCategories: new Set(),
      minPrice: null,
      maxPrice: null,
      q: "",
      brand: new Set(),
      rating: "",
      sort: "featured",
    };

    // --- Utilidades ---
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function renderChips(){
      const wrap = $("#activeChips");
      wrap.innerHTML = "";
      const chips = [];
      if(state.selectedCategories.size){
        chips.push(...[...state.selectedCategories].map(v=>({key:"category", label:"Cat: "+v, value:v})));
      }
      if(state.brand.size){
        chips.push(...[...state.brand].map(v=>({key:"brand", label:"Marca: "+v, value:v})));
      }
      if(state.minPrice!=null || state.maxPrice!=null){
        const txt = `Precio: ${state.minPrice??"-"} – ${state.maxPrice??"-"}`;
        chips.push({key:"price", label:txt, value:"price"});
      }
      if(state.q){chips.push({key:"q", label:"Buscar: "+state.q, value:"q"});}
      if(state.rating){chips.push({key:"rating", label:`${state.rating}★+`, value:"rating"});}

      chips.forEach(c=>{
        const el=document.createElement("button");
        el.className="chip is-active";
        el.innerHTML = `${c.label} <span class="x">✕</span>`;
        el.onclick=()=>removeFilter(c);
        wrap.appendChild(el);
      });
    }

    function removeFilter(chip){
      switch(chip.key){
        case "category": state.selectedCategories.delete(chip.value); $("#filters").querySelectorAll("[data-key='category'] input[type=checkbox]").forEach(i=>{if(i.value===chip.value) i.checked=false;}); break;
        case "brand": state.brand.delete(chip.value); $("#filters").querySelectorAll("[data-key='brand'] input[type=checkbox]").forEach(i=>{if(i.value===chip.value) i.checked=false;}); break;
        case "price": state.minPrice=null; state.maxPrice=null; $("#minPrice").value=""; $("#maxPrice").value=""; break;
        case "q": state.q=""; $("#q").value=""; break;
        case "rating": state.rating=""; $("#rall").checked=true; break;
      }
      renderChips();
      render();
    }

    function renderBrands(){
      const brands=[...new Set(products.map(p=>p.brand))].sort();
      const cont = $("#brandList");
      cont.innerHTML = brands.map(b=>`<div class="check"><input type="checkbox" value="${b}" id="b-${b}"><label for="b-${b}">${b}</label></div>`).join("");
      cont.querySelectorAll("input[type=checkbox]").forEach(cb=>cb.addEventListener("change", e=>{
        if(e.target.checked) state.brand.add(e.target.value); else state.brand.delete(e.target.value);
        renderChips(); render();
      }));
    }

    function applyFilters(list){
      return list.filter(p=>{
        if(state.selectedCategories.size && !state.selectedCategories.has(p.category)) return false;
        if(state.brand.size && !state.brand.has(p.brand)) return false;
        if(state.minPrice!=null && p.price < state.minPrice) return false;
        if(state.maxPrice!=null && p.price > state.maxPrice) return false;
        if(state.q && !p.name.toLowerCase().includes(state.q.toLowerCase())) return false;
        if(state.rating && p.rating < Number(state.rating)) return false;
        return true;
      });
    }

    function sortItems(list){
      const s = state.sort;
      const byName = (a,b)=>a.name.localeCompare(b.name,'es',{sensitivity:'base'});
      const byPrice = (a,b)=>a.price-b.price;
      const byRating = (a,b)=>b.rating-a.rating;
      if(s==='price-asc') return list.sort(byPrice);
      if(s==='price-desc') return list.sort((a,b)=>byPrice(b,a));
      if(s==='name-asc') return list.sort(byName);
      if(s==='name-desc') return list.sort((a,b)=>byName(b,a));
      return list.sort(byRating); // featured
    }

    function productCard(p){
      return `<article class="card" data-id="${p.id}">
        <div class="thumb" role="img" aria-label="Imagen de ${p.name}"><span>Imagen</span></div>
        <div class="card-body">
          <div class="title" title="${p.name}">${p.name}</div>
          <div class="meta">
            <span class="price">$${p.price}</span>
            <button class="btn primary">Agregar</button>
          </div>
          <div style="font-size:12px;color:var(--sub)">${p.brand} • ${p.category} • ${"★".repeat(p.rating)}</div>
        </div>
      </article>`
    }

    function render(){
      const grid = $("#grid");
      const empty = $("#empty");
      const filtered = sortItems(applyFilters(products.slice()));
      grid.innerHTML = filtered.map(productCard).join("");
      empty.hidden = filtered.length>0;
    }

    // --- Eventos de UI ---
    $("#sortSelect").addEventListener("change", e=>{state.sort = e.target.value; render();});

    // Abrir/cerrar acordeón
    $$(".acc-button").forEach(btn=>btn.addEventListener("click", e=>{
      const item = e.currentTarget.closest(".acc-item");
      item.classList.toggle("open");
      const expanded = item.classList.contains("open");
      e.currentTarget.setAttribute("aria-expanded", expanded);
      e.currentTarget.querySelector("span:last-child").textContent = expanded ? "▾" : "▸";
    }));

    // Categorías checkboxes
    $("#filters").querySelectorAll("[data-key='category'] input[type=checkbox]").forEach(cb=>cb.addEventListener("change", e=>{
      if(e.target.checked) state.selectedCategories.add(e.target.value); else state.selectedCategories.delete(e.target.value);
      renderChips(); render();
    }));

    // Precio
    $("#applyPrice").addEventListener("click", ()=>{
      const min = Number($("#minPrice").value); const max = Number($("#maxPrice").value);
      state.minPrice = isNaN(min) || $("#minPrice").value==="" ? null : min;
      state.maxPrice = isNaN(max) || $("#maxPrice").value==="" ? null : max;
      renderChips(); render();
    });

    // Búsqueda
    $("#q").addEventListener("input", e=>{state.q = e.target.value.trim(); renderChips(); render();});

    // Rating
    $$("input[name=rating]").forEach(r=>r.addEventListener("change", e=>{state.rating = e.target.value; renderChips(); render();}))

    // Init
    renderBrands();
    renderChips();
    render();
</script>
</html>
